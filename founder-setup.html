<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FounderOS Onboarding</title>
  <meta name="color-scheme" content="light">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      background: #f8f6f3;
    }
    .fade-enter {
      opacity: 0;
      transform: translateY(24px) scale(0.98);
      transition: opacity 0.4s cubic-bezier(.4,0,.2,1), transform 0.4s cubic-bezier(.4,0,.2,1);
    }
    .fade-enter-active {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .fade-exit {
      opacity: 1;
      transform: translateY(0) scale(1);
      transition: opacity 0.3s cubic-bezier(.4,0,.2,1), transform 0.3s cubic-bezier(.4,0,.2,1);
    }
    .fade-exit-active {
      opacity: 0;
      transform: translateY(-24px) scale(0.98);
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px #e2e0db;
      border-color: #e2e0db;
    }
    ::placeholder {
      color: #a3a3a3;
      opacity: 1;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center bg-[#f8f6f3] text-neutral-800 font-sans">
  <main class="w-full flex flex-col items-center px-4">
    <section id="onboarding-container" class="w-full max-w-xl bg-neutral-50 rounded-2xl shadow-md p-8 sm:p-10 transition-all duration-500">
      <!-- Screens injected here -->
    </section>
  </main>
  <script>
    // --- State ---
    const state = {
      stage: null,
      painPoints: [],
      painOther: "",
      company: {
        name: "",
        type: "",
        state: "",
        team: ""
      },
      tools: [],
      toolsOther: ""
    };

    // --- Screens ---
    const screens = [
      // 0: Welcome
      () => `
        <div class="flex flex-col items-center fade">
          <div class="text-5xl mb-4">👋</div>
          <h1 class="text-2xl sm:text-3xl font-semibold mb-2 text-neutral-900 text-center">Hey there — let’s get FounderOS working for you.</h1>
          <p class="text-lg text-neutral-600 mb-8 text-center max-w-md">We’ll keep this short. Promise. Think of it like stretching before a startup marathon — but more fun.</p>
          <button type="button" class="mt-2 px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none" onclick="nextScreen()">Let’s roll 🚀</button>
        </div>
      `,
      // 1: Stage Selection
      () => {
        const options = [
          "Idea, no MVP yet",
          "MVP built, validating with users",
          "Some traction, preparing to raise",
          "Currently raising",
          "Funded, growing fast",
          "Other"
        ];
        return `
          <div class="fade">
            <h2 class="text-2xl font-semibold mb-2 text-neutral-900">Pick your startup adventure <span title="No wrong answers!">🗺️</span></h2>
            <div class="mt-6 grid gap-4">
              ${options.map((opt, i) => `
                <div
                  class="tile-select cursor-pointer flex items-center px-5 py-4 rounded-2xl border transition shadow-sm bg-white hover:scale-105 hover:shadow-md ${state.stage === opt ? 'border-neutral-900 ring-2 ring-neutral-900' : 'border-neutral-200'}"
                  onclick="selectStage('${opt.replace(/'/g, "\\'")}')"
                >
                  <span class="text-lg font-medium flex-1">${opt}</span>
                  ${opt === "Other" ? `
                    <input
                      type="text"
                      id="stage-other"
                      class="ml-3 flex-1 bg-neutral-100 rounded-lg px-3 py-2 text-base border border-neutral-200 focus:border-neutral-400 transition"
                      placeholder="Tell us more"
                      value="${state.stage && !options.includes(state.stage) ? state.stage : ''}"
                      oninput="setStageOther(this.value)"
                      ${state.stage === "Other" || (!options.includes(state.stage) && state.stage) ? '' : 'disabled'}
                    />
                  ` : ''}
                  ${state.stage === opt ? `<svg class="ml-3 w-6 h-6 text-neutral-900" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>` : ''}
                </div>
              `).join('')}
            </div>
            <button type="button" class="mt-8 w-full px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none disabled:opacity-40"
              onclick="nextScreen()" ${state.stage ? '' : 'disabled'}>What’s next?</button>
          </div>
        `;
      },
      // 2: Ops Pain Points
      () => {
        const options = [
          "Legal and compliance",
          "Bookkeeping / receipts / invoices",
          "Payroll or contractor setup",
          "Founder updates / investor comms",
          "Admin overwhelm / task management",
          "Managing vendors + software tools",
          "Keeping my team aligned",
          "Other"
        ];
        return `
          <div class="fade">
            <h2 class="text-2xl font-semibold mb-2 text-neutral-900">Ops giving you nightmares? Let’s fix that <span title="We’ve seen it all.">😅</span></h2>
            <p class="text-neutral-600 mb-4">Pick up to 3 <span title="No judgment.">✨</span></p>
            <div class="grid gap-3 mb-2">
              ${options.map((opt, i) => `
                <div
                  class="tile-select cursor-pointer flex items-center px-5 py-4 rounded-2xl border transition shadow-sm bg-white hover:scale-105 hover:shadow-md ${state.painPoints.includes(opt) ? 'border-neutral-900 ring-2 ring-neutral-900' : 'border-neutral-200'}"
                  onclick="togglePainPoint('${opt.replace(/'/g, "\\'")}', ${i})"
                >
                  <span class="text-base flex-1">${opt}</span>
                  ${opt === "Other" ? `
                    <input
                      type="text"
                      id="pain-other"
                      class="ml-3 flex-1 bg-neutral-100 rounded-lg px-3 py-2 text-base border border-neutral-200 focus:border-neutral-400 transition"
                      placeholder="Tell us more"
                      value="${state.painOther || ''}"
                      oninput="setPainOther(this.value)"
                      ${state.painPoints.includes('Other') ? '' : 'disabled'}
                    />
                  ` : ''}
                  ${state.painPoints.includes(opt) ? `<svg class="ml-3 w-6 h-6 text-neutral-900" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>` : ''}
                </div>
              `).join('')}
            </div>
            <button type="button" class="mt-8 w-full px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none disabled:opacity-40"
              onclick="nextScreen()" ${state.painPoints.length > 0 ? '' : 'disabled'}>What’s next?</button>
          </div>
        `;
      },
      // 3: Company Basics
      () => `
        <div class="fade">
          <h2 class="text-2xl font-semibold mb-2 text-neutral-900">A few details to help us sprinkle some dashboard magic 🪄</h2>
          <form class="mt-6 grid gap-5" onsubmit="event.preventDefault(); nextScreen();">
            <div>
              <label class="block text-base mb-1 font-medium" for="company-name">Company Name <span title="Or your best guess!">🤔</span></label>
              <input
                id="company-name"
                type="text"
                class="w-full px-4 py-3 rounded-lg border border-neutral-200 bg-neutral-100 text-base focus:border-neutral-400 transition"
                placeholder="Acme Inc."
                value="${state.company.name || ''}"
                oninput="state.company.name = this.value; renderScreen();"
                required
              />
            </div>
            <div>
              <label class="block text-base mb-1 font-medium" for="company-type">Company Type</label>
              <select
                id="company-type"
                class="w-full px-4 py-3 rounded-lg border border-neutral-200 bg-neutral-100 text-base focus:border-neutral-400 transition"
                onchange="state.company.type = this.value; renderScreen();"
                required
              >
                <option value="" disabled ${!state.company.type ? 'selected' : ''}>Select type</option>
                <option value="LLC" ${state.company.type === 'LLC' ? 'selected' : ''}>LLC</option>
                <option value="C-Corp" ${state.company.type === 'C-Corp' ? 'selected' : ''}>C-Corp</option>
                <option value="Other" ${state.company.type === 'Other' ? 'selected' : ''}>Other</option>
              </select>
            </div>
            <div>
              <label class="block text-base mb-1 font-medium" for="company-state">State of Incorporation</label>
              <input
                id="company-state"
                type="text"
                class="w-full px-4 py-3 rounded-lg border border-neutral-200 bg-neutral-100 text-base focus:border-neutral-400 transition"
                placeholder="e.g. Delaware"
                value="${state.company.state || ''}"
                oninput="state.company.state = this.value; renderScreen();"
                required
              />
            </div>
            <div>
              <label class="block text-base mb-1 font-medium" for="company-team">Team Size</label>
              <select
                id="company-team"
                class="w-full px-4 py-3 rounded-lg border border-neutral-200 bg-neutral-100 text-base focus:border-neutral-400 transition"
                onchange="state.company.team = this.value; renderScreen();"
                required
              >
                <option value="" disabled ${!state.company.team ? 'selected' : ''}>Select size</option>
                <option value="Solo founder" ${state.company.team === 'Solo founder' ? 'selected' : ''}>Solo founder</option>
                <option value="2–3 ppl" ${state.company.team === '2–3 ppl' ? 'selected' : ''}>2–3 ppl</option>
                <option value="4+ ppl" ${state.company.team === '4+ ppl' ? 'selected' : ''}>4+ ppl</option>
              </select>
            </div>
            <button type="submit" class="mt-4 w-full px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none disabled:opacity-40"
              ${state.company.name && state.company.type && state.company.state && state.company.team ? '' : 'disabled'}>What’s next?</button>
          </form>
        </div>
      `,
      // 4: Existing Tools
      () => {
        const options = [
          "Mercury",
          "Stripe",
          "Gusto",
          "Deel",
          "Notion",
          "QuickBooks",
          "Clerky",
          "None yet",
          "Other"
        ];
        return `
          <div class="fade">
            <h2 class="text-2xl font-semibold mb-2 text-neutral-900">Which tools are already in your founder toolbox? 🧰</h2>
            <div class="grid gap-3 mt-6 mb-2">
              ${options.map((opt, i) => `
                <label class="tile-select flex items-center px-5 py-4 rounded-2xl border transition shadow-sm bg-white hover:scale-105 hover:shadow-md cursor-pointer ${state.tools.includes(opt) ? 'border-neutral-900 ring-2 ring-neutral-900' : 'border-neutral-200'}">
                  <input
                    type="checkbox"
                    class="form-checkbox w-5 h-5 accent-neutral-900 mr-4"
                    style="accent-color: #171717"
                    value="${opt}"
                    ${state.tools.includes(opt) ? 'checked' : ''}
                    onchange="toggleTool('${opt.replace(/'/g, "\\'")}', ${i})"
                  />
                  <span class="text-base flex-1">${opt}</span>
                  ${opt === "Other" ? `
                    <input
                      type="text"
                      id="tools-other"
                      class="ml-3 flex-1 bg-neutral-100 rounded-lg px-3 py-2 text-base border border-neutral-200 focus:border-neutral-400 transition"
                      placeholder="Tell us more"
                      value="${state.toolsOther || ''}"
                      oninput="setToolsOther(this.value)"
                      ${state.tools.includes('Other') ? '' : 'disabled'}
                    />
                  ` : ''}
                </label>
              `).join('')}
            </div>
            <button type="button" class="mt-8 w-full px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none"
              onclick="nextScreen()">What’s next?</button>
          </div>
        `;
      },
      // 5: Final Screen
      () => `
        <div class="flex flex-col items-center fade">
          <h2 class="text-2xl sm:text-3xl font-semibold mb-2 text-neutral-900 text-center">Thanks! Your dashboard is spinning up now.</h2>
          <p class="text-lg text-neutral-600 mb-8 text-center max-w-md">Spinning up your startup karma… <span title="We’ll pre-load a few smart workflows based on your answers. You can always tweak it later.">🌀</span></p>
          <button type="button" class="mt-2 px-6 py-3 rounded-xl bg-neutral-900 text-neutral-50 text-lg font-medium shadow transition hover:bg-neutral-800 hover:scale-105 focus:outline-none" onclick="goToDashboard()">Go to Dashboard</button>
        </div>
      `
    ];

    // --- Screen Logic ---
    let currentScreen = 0;

    function renderScreen(dir = 1) {
      const container = document.getElementById('onboarding-container');
      // Fade out
      container.classList.remove('fade-enter-active');
      container.classList.add('fade-exit');
      setTimeout(() => {
        container.innerHTML = screens[currentScreen]();
        // Fade in
        container.classList.remove('fade-exit');
        container.classList.add('fade-enter');
        setTimeout(() => {
          container.classList.add('fade-enter-active');
        }, 10);
      }, 250);
    }

    function nextScreen() {
      if (currentScreen < screens.length - 1) {
        currentScreen++;
        renderScreen(1);
      }
    }

    function goToDashboard() {
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
      });
      setTimeout(() => {
        window.location.href = '/';
      }, 1500);
    }

    // --- Stage Selection ---
    function selectStage(val) {
      const options = [
        "Idea, no MVP yet",
        "MVP built, validating with users",
        "Some traction, preparing to raise",
        "Currently raising",
        "Funded, growing fast",
        "Other"
      ];
      if (val === "Other") {
        state.stage = "Other";
      } else if (options.includes(val)) {
        state.stage = val;
      } else {
        state.stage = val; // custom text
      }
      renderScreen();
      if (val === "Other") {
        setTimeout(() => {
          document.getElementById('stage-other')?.focus();
        }, 100);
      }
    }
    function setStageOther(val) {
      state.stage = val;
      renderScreen();
    }

    // --- Pain Points ---
    function togglePainPoint(val, idx) {
      if (state.painPoints.includes(val)) {
        state.painPoints = state.painPoints.filter(p => p !== val);
        if (val === "Other") state.painOther = "";
      } else if (state.painPoints.length < 3) {
        state.painPoints.push(val);
      }
      renderScreen();
      if (val === "Other" && state.painPoints.includes("Other")) {
        setTimeout(() => {
          document.getElementById('pain-other')?.focus();
        }, 100);
      }
    }
    function setPainOther(val) {
      state.painOther = val;
      renderScreen();
    }

    // --- Tools ---
    function toggleTool(val, idx) {
      if (state.tools.includes(val)) {
        state.tools = state.tools.filter(t => t !== val);
        if (val === "Other") state.toolsOther = "";
      } else {
        state.tools.push(val);
      }
      renderScreen();
      if (val === "Other" && state.tools.includes("Other")) {
        setTimeout(() => {
          document.getElementById('tools-other')?.focus();
        }, 100);
      }
    }
    function setToolsOther(val) {
      state.toolsOther = val;
      renderScreen();
    }

    // --- Initial Render ---
    window.renderScreen = renderScreen;
    window.nextScreen = nextScreen;
    window.goToDashboard = goToDashboard;
    window.selectStage = selectStage;
    window.setStageOther = setStageOther;
    window.togglePainPoint = togglePainPoint;
    window.setPainOther = setPainOther;
    window.toggleTool = toggleTool;
    window.setToolsOther = setToolsOther;

    // Fade in on load (DOMContentLoaded)
    document.addEventListener("DOMContentLoaded", () => {
      renderScreen();
      setTimeout(() => {
        const container = document.getElementById('onboarding-container');
        if (container) container.classList.add('fade-enter-active');
      }, 10);
    });
  </script>
</body>
</html>